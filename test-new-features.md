# 新功能测试指南

## 🎯 测试目标
验证基础底座框架重构后的新功能是否正常工作

## 📋 测试清单

### 1. 权限控制测试
- [ ] **超级管理员登录测试**
  - 使用 `superadmin@system.com` 或 `demo@example.com` 登录
  - 验证顶部右侧是否显示系统设置图标
  - 验证系统设置图标点击后跳转到系统设置页面

- [ ] **普通用户登录测试**
  - 使用普通用户邮箱登录
  - 验证顶部右侧不显示系统设置图标
  - 验证直接访问 `/system-settings` 是否有权限控制

### 2. 系统设置Tab页面测试
- [ ] **Tab页面结构验证**
  - 访问 `/system-settings` 页面
  - 验证是否显示6个Tab：基础配置、管理员管理、安全配置、邮箱配置、布局配置、样式监控
  - 验证每个Tab点击后内容是否正确切换

- [ ] **Tab页面功能测试**
  - 测试基础配置Tab的内容显示
  - 测试管理员管理Tab的内容显示
  - 测试安全配置Tab的内容显示
  - 测试邮箱配置Tab的内容显示
  - 测试布局配置Tab的内容显示
  - 测试样式监控Tab的内容显示

- [ ] **URL参数测试**
  - 测试 `/system-settings?tab=admin` 是否直接跳转到管理员管理Tab
  - 测试 `/system-settings?tab=security` 是否直接跳转到安全配置Tab
  - 测试其他Tab的URL参数功能

### 3. 操作日志功能测试
- [ ] **操作日志页面访问**
  - 点击顶部右侧的日志图标（HistoryOutlined）
  - 验证是否跳转到 `/operation-logs` 页面
  - 验证页面标题和基本布局

- [ ] **操作日志功能验证**
  - 验证日志列表是否正确显示
  - 测试搜索功能（操作、资源、详情）
  - 测试过滤功能（操作类型、结果、日期范围）
  - 测试导出功能是否正常
  - 验证分页功能

- [ ] **操作日志数据验证**
  - 验证每个用户只能看到自己的操作日志
  - 验证日志记录的完整性（时间、用户、操作、资源、结果、IP、详情）

### 4. 菜单结构统一测试
- [ ] **顶部菜单布局测试**
  - 验证顶部菜单只显示：概览、用户管理
  - 验证系统设置已从菜单中移除
  - 验证操作日志已从菜单中移除

- [ ] **侧边栏布局测试**
  - 切换到侧边栏布局
  - 验证侧边栏菜单只显示：概览、用户管理
  - 验证系统设置和操作日志通过图标访问

- [ ] **布局切换测试**
  - 测试顶部布局和侧边栏布局之间的切换
  - 验证两种布局下的功能一致性

### 5. 图标位置验证
- [ ] **顶部右侧图标顺序**
  - 验证图标顺序：快速设置 → 操作日志 → 通知 → 系统设置（仅超级管理员）→ 用户信息
  - 验证图标间距和样式一致性

- [ ] **侧边栏布局图标**
  - 验证侧边栏布局下的图标顺序和功能一致性

## 🐛 已知问题

### 主题包警告（非阻塞）
- `OperationLogsPage.tsx` 包含内联样式警告
- `SystemSettingsPage.tsx` 未使用主题包警告
- 这些是开发时的警告，不影响功能使用

### TypeScript类型错误（非阻塞）
- `ThemePackageConfig` 类型缺少 `name` 属性
- `LayoutType` 类型不匹配
- 部分组件属性类型错误

## ✅ 测试通过标准

### 必须通过的功能
1. 权限控制：超级管理员能看到系统设置图标，普通用户不能
2. 系统设置Tab：6个Tab都能正常切换和显示内容
3. 操作日志：页面能正常访问，基本功能正常
4. 菜单结构：菜单项正确，图标位置正确

### 可选通过的功能
1. 操作日志的详细功能（搜索、过滤、导出）
2. 系统设置各Tab的具体功能
3. 主题包警告的清理

## 🚀 测试执行

### 自动测试脚本
```bash
# 启动测试环境
cd /Users/kuangxb/Desktop/spec-kit/demo-project/frontend
npm run dev

cd /Users/kuangxb/Desktop/spec-kit/demo-project/backend
source venv/bin/activate && python3 -m uvicorn src.main:app --reload --host 0.0.0.0 --port 8000
```

### 手动测试步骤
1. 访问 http://localhost:3000
2. 使用超级管理员账号登录
3. 逐一验证上述测试清单
4. 使用普通用户账号登录
5. 验证权限控制功能

## 📊 测试结果记录

### 测试环境
- 前端：http://localhost:3000
- 后端：http://localhost:8000
- 测试时间：$(date)

### 测试结果
- [ ] 权限控制测试
- [ ] 系统设置Tab页面测试
- [ ] 操作日志功能测试
- [ ] 菜单结构统一测试
- [ ] 图标位置验证

### 发现的问题
- 问题1：
- 问题2：
- 问题3：

### 建议改进
- 改进1：
- 改进2：
- 改进3：
