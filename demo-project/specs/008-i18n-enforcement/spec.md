# 国际化强制规范 (Internationalization Enforcement)

## 规范概述

本规范确保所有用户界面文本必须通过国际化(i18n)系统管理，禁止硬编码文本，保证多语言支持和本地化一致性。

## 核心原则

### 1. 文本国际化强制原则
- **禁止硬编码文本**: 所有用户可见文本必须使用 `t()` 函数
- **翻译键命名规范**: 使用层级结构 `category.subcategory.key`
- **语言包完整性**: 所有语言包必须包含相同的翻译键
- **动态文本处理**: 支持参数化翻译和复数形式

### 2. 代码规范要求

#### 2.1 React 组件规范
```typescript
// ✅ 正确示例
const MyComponent = () => {
  const { t } = useTranslation();
  return <div>{t('common.loading')}</div>;
};

// ❌ 错误示例
const MyComponent = () => {
  return <div>加载中...</div>; // 硬编码文本
};
```

#### 2.2 翻译键命名规范
```typescript
// ✅ 正确示例
t('userManagement.title')           // 页面标题
t('common.save')                    // 通用操作
t('validation.email.required')      // 验证消息
t('error.network.timeout')          // 错误消息

// ❌ 错误示例
t('title')                          // 过于简单
t('user_management_title')          // 使用下划线
t('UserManagementTitle')            // 驼峰命名
```

#### 2.3 参数化翻译
```typescript
// ✅ 正确示例
t('user.welcome', { name: userName })
t('items.count', { count: itemCount })
t('date.format', { date: formattedDate })

// ❌ 错误示例
t('user.welcome') + ' ' + userName  // 字符串拼接
```

### 3. 语言包结构规范

#### 3.1 标准语言包结构
```json
{
  "common": {
    "loading": "加载中...",
    "save": "保存",
    "cancel": "取消",
    "confirm": "确认",
    "delete": "删除",
    "edit": "编辑",
    "add": "添加",
    "search": "搜索",
    "reset": "重置",
    "submit": "提交"
  },
  "navigation": {
    "overview": "概览",
    "userManagement": "用户管理",
    "systemSettings": "系统设置"
  },
  "validation": {
    "email": {
      "required": "邮箱是必填项",
      "invalid": "请输入有效的邮箱地址"
    }
  },
  "error": {
    "network": {
      "timeout": "网络请求超时",
      "unavailable": "网络不可用"
    }
  }
}
```

#### 3.2 语言包同步要求
- 所有语言包必须包含相同的键结构
- 新增翻译键时，所有语言包必须同步更新
- 删除翻译键时，需要确认所有语言包都已清理

## 验证规则

### 1. 硬编码文本检测
- 检测 JSX 中的直接文本节点
- 检测字符串字面量中的用户可见文本
- 检测模板字符串中的硬编码文本
- 排除技术标识符、URL、正则表达式等

### 2. 翻译键验证
- 验证翻译键是否存在
- 验证翻译键命名是否符合规范
- 验证所有语言包是否包含该键
- 验证参数化翻译的参数使用

### 3. 语言包完整性验证
- 验证所有语言包结构一致性
- 检测缺失的翻译键
- 检测未使用的翻译键
- 验证翻译内容质量

## 实施要求

### 1. 开发阶段验证
- ESLint 规则实时检测
- IDE 插件支持
- 预提交钩子验证

### 2. 构建阶段验证
- Vite 插件构建时检查
- 翻译键完整性验证
- 语言包同步检查

### 3. 运行时验证
- 开发模式下警告缺失翻译
- 生产模式下优雅降级
- 翻译覆盖率统计

## 工具支持

### 1. ESLint 规则
- `no-hardcoded-text`: 禁止硬编码文本
- `require-translation-key`: 要求使用翻译键
- `validate-translation-structure`: 验证翻译键结构

### 2. Vite 插件
- `vite-plugin-i18n-validator`: 构建时验证
- 翻译键扫描和验证
- 语言包同步检查

### 3. 开发工具
- 翻译键自动补全
- 缺失翻译键检测
- 翻译覆盖率报告

## 违规处理

### 1. 检测到硬编码文本
- 构建失败并显示具体位置
- 提供自动修复建议
- 记录违规统计

### 2. 翻译键缺失
- 警告并继续构建
- 使用键名作为降级文本
- 生成缺失翻译键报告

### 3. 语言包不同步
- 构建失败并列出差异
- 提供同步修复工具
- 验证修复结果

## 最佳实践

### 1. 翻译键设计
- 使用语义化命名
- 保持层级结构清晰
- 避免过深嵌套

### 2. 参数化翻译
- 合理使用插值
- 支持复数形式
- 处理日期和数字格式化

### 3. 性能优化
- 按需加载语言包
- 缓存翻译结果
- 避免重复翻译

## 验收标准

### 1. 代码质量
- 所有用户可见文本使用翻译键
- 翻译键命名符合规范
- 无硬编码文本残留

### 2. 功能完整性
- 所有语言包结构一致
- 翻译键完整无缺失
- 参数化翻译正确工作

### 3. 工具集成
- ESLint 规则正常工作
- 构建时验证有效
- 开发工具支持完善

## 维护要求

### 1. 定期检查
- 每月扫描硬编码文本
- 季度审查翻译键使用
- 年度优化语言包结构

### 2. 团队培训
- 新成员国际化规范培训
- 定期最佳实践分享
- 工具使用指导

### 3. 持续改进
- 收集使用反馈
- 优化验证规则
- 完善工具支持



